<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="QrCode_Reader.Views.ListPage"
             Title="Lista">

    <!-- SEARCHBAR NO TÍTULO -->
    <Shell.TitleView>
        <SearchBar
            x:Name="SearchBar"
            Placeholder="Pesquisar..."
            IsVisible="False"
            Opacity="0"
            TranslationX="-300"
            TextChanged="OnSearchTextChanged"
            HeightRequest="40"
            Margin="10,0"/>
    </Shell.TitleView>

    <!-- BOTÕES DA TOOLBAR -->
    <ContentPage.ToolbarItems>

        <ToolbarItem
            x:Name="SearchIcon"
            IconImageSource="search.png"
            Order="Primary"
            Priority="0"
            Clicked="OnSearchToggle"/>

        <ToolbarItem
            IconImageSource="upload.png"
            Order="Primary"
            Priority="1"
            Clicked="ImportClicked"/>

        <ToolbarItem
            IconImageSource="downloads.png"
            Order="Primary"
            Priority="2"
            Clicked="ExportClicked"/>

    </ContentPage.ToolbarItems>

    <!-- CONTEÚDO COM DETEÇÃO DE TOQUE FORA -->
    <Grid>

        <CollectionView x:Name="List"
                        SelectionMode="None"
                        Margin="10">

            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Grid RowDefinitions="Auto,1"
                          ColumnDefinitions="*,Auto"
                          Padding="5,12">

                        <Label Text="{Binding Name}"
                               FontSize="16"
                               VerticalOptions="Center"/>

                        <CheckBox Grid.Column="1"
                                  IsChecked="{Binding Delivered}"
                                  IsEnabled="False"
                                  VerticalOptions="Center"/>

                        <BoxView Grid.Row="1"
                                 Grid.ColumnSpan="2"
                                 HeightRequest="1"
                                 Margin="0,10,0,0"
                                 BackgroundColor="#E0E0E0"/>

                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <!-- CAPTURA TOQUE FORA DA SEARCHBAR -->
        <BoxView BackgroundColor="Transparent">
            <BoxView.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnOutsideTapped"/>
            </BoxView.GestureRecognizers>
        </BoxView>

    </Grid>
</ContentPage>
